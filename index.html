<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>60-Day Habit Checklist — Premium</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <meta name="color-scheme" content="dark">
  <style>
    :root{
      --bg-100: #071029;
      --bg-200: #071a2a;
      --card: rgba(255,255,255,0.04);
      --muted: #9aa4b2;
      --accent: linear-gradient(90deg,#60a5fa,#3b82f6);
      --glass: rgba(255,255,255,0.03);
      --good: #34d399;
      --danger: #fb7185;
      --radius: 12px;
      --max-width: 1100px;
    }
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6eef8}
    html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 10% 10%, rgba(59,130,246,0.06), transparent 8%), linear-gradient(180deg,var(--bg-100) 0%, var(--bg-200) 100%);}
    body{padding:28px;display:flex;justify-content:center}
    .wrap{width:100%;max-width:var(--max-width)}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,#0ea5e9 0%,#6366f1 100%);display:grid;place-items:center;font-weight:800;color:#04233e}
    h1{font-size:18px;margin:0}
    .sub{color:var(--muted);font-size:13px}

    .top-stats{display:flex;gap:12px;align-items:center}
    .stat{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px;border-radius:10px;min-width:120px;text-align:center}
    .stat strong{display:block;font-size:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--radius);margin-top:16px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:14px}
    .small{font-size:13px;color:var(--muted)}

    /* habits */
    .habit-list{display:flex;flex-direction:column;gap:10px;margin-top:8px}
    .habit{display:flex;align-items:center;gap:10px;padding:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border-radius:10px}
    .habit input[type=text]{flex:1;background:transparent;border:0;color:inherit;outline:none;font-weight:600}
    .habit .handle{cursor:grab;padding:6px;border-radius:6px}
    .btn{background:linear-gradient(90deg,#60a5fa,#3b82f6);border:0;padding:8px 12px;color:#04233e;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    /* day grid */
    .day-grid{display:grid;grid-template-columns:repeat(10,1fr);gap:8px;margin-top:12px}
    .day{background:var(--glass);padding:10px;border-radius:10px;text-align:center;font-size:13px;cursor:pointer;transition:transform .12s ease, box-shadow .12s ease}
    .day:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(2,6,23,0.45)}
    .day .dnum{font-weight:700}
    .day .ddate{font-size:11px;color:var(--muted);margin-top:6px}
    .day.done{background:linear-gradient(90deg,var(--good),#10b981);color:#04233e}
    .day.today{outline:2px solid rgba(59,130,246,0.18)}

    /* checklist area */
    #dayChecklistArea{margin-top:14px}
    .check-row{display:flex;align-items:center;justify-content:space-between;padding:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:8px;margin-bottom:8px}

    .progress{height:12px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#60a5fa,#3b82f6);width:0%}

    aside .card{position:sticky;top:28px}

    footer{margin-top:18px;color:var(--muted);font-size:13px}

    /* responsive */
    @media(max-width:1100px){.grid{grid-template-columns:1fr 320px}}
    @media(max-width:880px){.grid{grid-template-columns:1fr}.day-grid{grid-template-columns:repeat(6,1fr)}}
    @media(max-width:420px){.day-grid{grid-template-columns:repeat(3,1fr)}}

    /* subtle utilities */
    .muted{color:var(--muted)}
    .flex{display:flex;gap:8px;align-items:center}
    textarea{background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit;padding:8px;border-radius:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">60</div>
        <div>
          <h1>60‑Day Habit Change Plan</h1>
          <div class="sub">Small daily wins — build consistent sleep, diet & activity habits</div>
        </div>
      </div>

      <div class="top-stats">
        <div class="stat small">Start: <strong id="startDate">(not set)</strong></div>
        <div class="stat small">Days done: <strong id="daysTracked">0</strong>/60</div>
        <div class="stat small">Overall progress: <strong id="percent">0%</strong></div>
      </div>
    </header>

    <div class="grid">
      <section>
        <div class="card" aria-labelledby="controls">
          <div style="display:flex;justify-content:space-between;gap:12px;align-items:center;">
            <div style="flex:1">
              <div class="small">Select your 60-day start date</div>
              <input type="date" id="start" />
            </div>
            <div style="width:320px;text-align:right">
              <div class="small">Progress</div>
              <div class="progress" style="width:220px"><i id="progFill"></i></div>
            </div>
          </div>

          <hr style="margin:14px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)" />

          <div style="display:flex;justify-content:space-between;gap:14px;align-items:flex-start">
            <div style="flex:1">
              <div class="small">Daily habits</div>
              <div class="habit-list" id="habitList"></div>

              <div style="display:flex;gap:8px;margin-top:10px">
                <input id="newHabit" type="text" placeholder="Add custom habit (e.g., 10 min walk)" />
                <button class="btn" id="addHabit">Add</button>
                <button class="btn secondary" id="resetHabits">Reset</button>
              </div>
            </div>

            <div style="width:320px">
              <div class="small">60‑day calendar (tap a day to open checklist)</div>
              <div class="day-grid" id="dayGrid" aria-label="60 day calendar"></div>

              <div style="margin-top:10px;display:flex;gap:8px;justify-content:space-between;align-items:center">
                <div class="small">Selected day: <strong id="selectedDayText">—</strong></div>
                <div style="display:flex;gap:8px">
                  <button class="btn" id="prevDay">Prev</button>
                  <button class="btn" id="nextDay">Next</button>
                </div>
              </div>

            </div>
          </div>

          <hr style="margin:14px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)" />

          <div id="dayChecklistArea" style="display:none">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
              <div>
                <div class="small">Checklist for</div>
                <div style="font-weight:800" id="selectedDayHeader">Day 1 — Date</div>
              </div>
              <div class="habit-actions">
                <button class="btn secondary" id="clearDay">Clear</button>
                <button class="btn" id="markAll">Mark all done</button>
              </div>
            </div>

            <div style="margin-top:12px" id="checklist"></div>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin:0;font-size:15px">60-Day Plan (overview)</h3>
          <p class="small" style="margin-top:8px">Four phases — each phase is 15 days. Focus one area at a time but keep previous wins.</p>

          <ol style="margin:10px 0 0 18px;font-size:14px">
            <li><strong>Days 1–15 (Sleep & baseline)</strong>: Move bedtime earlier by 15 minutes every 3 days until you reach 7–8 hrs. No screens 30 min before bed. Track hours of sleep daily.</li>
            <li><strong>Days 16–30 (Stabilize blood sugar)</strong>: Lower refined carbs, add protein for breakfast, 10–15 min walk after meals, drink water first thing and between meals.</li>
            <li><strong>Days 31–45 (Build movement)</strong>: Add strength training 2× week, brisk walks 4× week, short post-meal walks daily. Increase NEAT (standing, stairs).</li>
            <li><strong>Days 46–60 (Refine & solidify)</strong>: Tighten fasting adherence, reduce hidden calories, aim for consistent 7–8 hrs sleep, review labs if no improvement.</li>
          </ol>

          <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)" />
          <div class="small">Tip: start with 3–4 core daily habits (sleep target, no sugar after 8pm, 10-min post-meal walk, 20–30 min strength/cardio). Add more only after these are consistent for a week.</div>
        </div>

      </section>

      <aside>
        <div class="card">
          <div class="small">Quick actions</div>
          <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
            <button class="btn" id="markToday">Open today</button>
            <button class="btn secondary" id="export">Export JSON</button>
            <button class="btn secondary" id="importBtn">Import JSON</button>
            <input type="file" id="importFile" style="display:none" accept="application/json" />
            <button class="btn secondary" id="clearAll">Clear all data</button>
          </div>

          <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)" />

          <div class="small">Default habits (editable)</div>
          <ul style="margin:8px 0 0 18px;color:var(--muted)">
            <li>Sleep >= 7 hrs</li>
            <li>No sugar / sugary drinks</li>
            <li>Protein-rich breakfast</li>
            <li>10–15 min walk after meal</li>
            <li>Strength or bodyweight session</li>
          </ul>
        </div>

        <div class="card" style="margin-top:12px">
          <div class="small">How to use</div>
          <ol style="margin:8px 0 0 18px;color:var(--muted)">
            <li>Choose a start date (day 1) — this creates 60 days.</li>
            <li>Edit daily habits to match your goals.</li>
            <li>Tap any day and check off habits as you complete them.</li>
            <li>Use export/import to backup or move between devices.</li>
          </ol>
        </div>
      </aside>
    </div>

    <footer>
      <div class="small">Made for personal tracking — stores data in your browser only (localStorage). To publish on GitHub: create a repo, add this file as <code>index.html</code> and enable GitHub Pages from the repository settings.</div>
    </footer>
  </div>

  <script>
    // Premium, more robust 60-day checklist
    const STORAGE_KEY = 'habit60_v1';
    const defaultHabits = ['Sleep ≥ 7 hrs','No sugary drinks','Protein breakfast','10–15 min post-meal walk','Strength session (20–30 min)'];

    // elements
    const startInput = document.getElementById('start');
    const habitList = document.getElementById('habitList');
    const newHabit = document.getElementById('newHabit');
    const addHabit = document.getElementById('addHabit');
    const dayGrid = document.getElementById('dayGrid');
    const selectedDayText = document.getElementById('selectedDayText');
    const selectedDayHeader = document.getElementById('selectedDayHeader');
    const checklist = document.getElementById('checklist');
    const dayChecklistArea = document.getElementById('dayChecklistArea');
    const progFill = document.getElementById('progFill');
    const startDateLabel = document.getElementById('startDate');
    const daysTrackedLabel = document.getElementById('daysTracked');
    const percentLabel = document.getElementById('percent');

    // state
    let state = loadState();
    let selectedIndex = null;

    // helpers for safe date parsing (treat date as local date)
    function parseYMD(ymd){ if(!ymd) return null; const [y,m,d] = ymd.split('-').map(Number); return new Date(y, m-1, d); }
    function fmt(d){ if(!d) return '(not set)'; return d.toLocaleDateString(); }
    function fmtLong(d){ if(!d) return ''; return d.toDateString(); }

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(raw){
          const parsed = JSON.parse(raw);
          // migrate missing fields
          parsed.habits = parsed.habits || defaultHabits.slice();
          parsed.days = parsed.days || {};
          parsed.start = parsed.start || null;
          return parsed;
        }
      }catch(e){console.error('loadState',e)}
      return {start:null,habits:defaultHabits.slice(),days:{}};
    }

    function saveState(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state))}

    // render habits — editable, deletable
    function renderHabits(){habitList.innerHTML='';state.habits.forEach((h,idx)=>{
      const el = document.createElement('div');el.className='habit';
      const input = document.createElement('input');input.type='text';input.value=h;input.setAttribute('aria-label','Habit name');input.onchange=()=>{state.habits[idx]=input.value.trim()||'Untitled habit'; saveState(); renderDayChecklist(); renderDayGrid();}
      const del = document.createElement('button');del.className='btn secondary';del.textContent='Delete';del.onclick=()=>{if(!confirm('Delete this habit?')) return; state.habits.splice(idx,1); saveState(); renderHabits(); renderDayChecklist(); renderDayGrid();}
      el.appendChild(input); el.appendChild(del); habitList.appendChild(el);
    });
    }

    addHabit.addEventListener('click',()=>{const v=newHabit.value.trim(); if(!v) return; state.habits.push(v); newHabit.value=''; saveState(); renderHabits(); renderDayChecklist(); renderDayGrid();})

    document.getElementById('resetHabits').addEventListener('click',()=>{ if(!confirm('Reset to default habits?')) return; state.habits = defaultHabits.slice(); saveState(); renderHabits(); renderDayChecklist(); renderDayGrid();})

    startInput.addEventListener('change',()=>{ state.start = startInput.value || null; saveState(); renderAll(); })

    // create array of 60 Date objects (local dates)
    function makeDays(){ if(!state.start) return []; const s = parseYMD(state.start); if(!s) return []; const arr=[]; for(let i=0;i<60;i++){ const d = new Date(s.getFullYear(), s.getMonth(), s.getDate()+i); arr.push(d); } return arr; }

    function renderDayGrid(){ dayGrid.innerHTML=''; const days = makeDays(); const today = new Date(); const todayYMD = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;
      days.forEach((d,i)=>{
        const dd = document.createElement('div'); dd.className='day';
        const num = document.createElement('div'); num.className='dnum'; num.textContent = 'D'+(i+1);
        const date = document.createElement('div'); date.className='ddate'; date.textContent = d.toLocaleDateString();
        dd.appendChild(num); dd.appendChild(date);
        const key = keyFor(i);
        // mark done when completedCount >= habits.length
        if(key && state.days[key] && (state.days[key].completedCount >= state.habits.length)) dd.classList.add('done');
        // highlight today if within range
        const isToday = (d.getFullYear()===today.getFullYear() && d.getMonth()===today.getMonth() && d.getDate()===today.getDate());
        if(isToday) dd.classList.add('today');
        dd.onclick = ()=>{ openDay(i); };
        dd.onkeyup = (e)=>{ if(e.key === 'Enter' || e.key === ' ') openDay(i); };
        dd.tabIndex = 0;
        dayGrid.appendChild(dd);
      }); updateProgress(); }

    function openDay(i){ const days = makeDays(); if(!days[i]) return; selectedIndex = i; const d = days[i]; selectedDayText.textContent = 'Day '+(i+1)+' — '+d.toLocaleDateString(); selectedDayHeader.textContent = 'Day '+(i+1)+' — '+fmtLong(d); dayChecklistArea.style.display='block'; renderDayChecklist(); scrollIntoViewIfNeeded(dayChecklistArea); }

    function scrollIntoViewIfNeeded(el){ const r = el.getBoundingClientRect(); if(r.top < 0 || r.bottom > (window.innerHeight || document.documentElement.clientHeight)) el.scrollIntoView({behavior:'smooth',block:'center'}); }

    function renderDayChecklist(){ checklist.innerHTML=''; if(selectedIndex===null){ dayChecklistArea.style.display='none'; return; }
      const k = keyFor(selectedIndex); if(!k) return; const saved = state.days[k] || {items:{},note:''};
      state.habits.forEach((h,idx)=>{
        const row = document.createElement('div'); row.className='check-row';
        const left = document.createElement('div'); left.textContent = h; left.style.flex='1'; left.style.paddingRight='12px';
        const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!saved.items[idx]; cb.onchange = ()=>{ saved.items[idx] = cb.checked; saveDay(k,saved); renderDayGrid(); renderDayChecklist(); }
        row.appendChild(left); row.appendChild(cb); checklist.appendChild(row);
      });
      const note = document.createElement('textarea'); note.rows = 3; note.style.width='100%'; note.placeholder='Notes (optional)'; note.value = saved.note || ''; note.onchange = ()=>{ saved.note = note.value; saveDay(k,saved); }
      checklist.appendChild(note);
      const meta = document.createElement('div'); meta.style.marginTop='8px'; meta.style.display='flex'; meta.style.justifyContent='space-between'; meta.style.alignItems='center';
      const doneCount = Object.values(saved.items||{}).filter(Boolean).length;
      const leftMeta = document.createElement('div'); leftMeta.className='small muted'; leftMeta.textContent = `Completed: ${doneCount}/${state.habits.length}`;
      const pct = Math.round(state.habits.length ? (doneCount/state.habits.length*100) : 0);
      const rightMeta = document.createElement('div'); rightMeta.className='small'; rightMeta.innerHTML = `<span style=\"font-weight:800\">${pct}%</span>`;
      meta.appendChild(leftMeta); meta.appendChild(rightMeta); checklist.appendChild(meta);
    }

    function saveDay(key,obj){ obj.completedCount = Object.values(obj.items||{}).filter(Boolean).length; state.days[key] = obj; saveState(); updateProgress(); }

    function keyFor(i){ if(!state.start) return null; return 'd'+(i+1); }

    document.getElementById('prevDay').addEventListener('click',()=>{ if(selectedIndex>0) openDay(selectedIndex-1); })
    document.getElementById('nextDay').addEventListener('click',()=>{ if(selectedIndex===null) openDay(0); else if(selectedIndex<59) openDay(selectedIndex+1); })
    document.getElementById('markAll').addEventListener('click',()=>{ const k = keyFor(selectedIndex); if(!k) return; const obj = {items:{},note:''}; state.habits.forEach((_,i)=> obj.items[i]=true); saveDay(k,obj); renderDayChecklist(); renderDayGrid(); })
    document.getElementById('clearDay').addEventListener('click',()=>{ const k = keyFor(selectedIndex); if(!k) return; if(!confirm('Clear all checks for this day?')) return; delete state.days[k]; saveState(); renderDayChecklist(); renderDayGrid(); })

    document.getElementById('markToday').addEventListener('click',()=>{
      if(!state.start){ alert('Set a start date first.'); return }
      const today = new Date(); const s = parseYMD(state.start);
      const diff = Math.floor((today - s) / (24*3600*1000)); if(diff<0||diff>59){ alert('Today is outside your 60-day window.'); return }
      openDay(diff);
    })

    function updateProgress(){ const totalDays = 60; let fullyDone = 0; let totalTasks = 0; let completedTasks = 0; for(let i=0;i<totalDays;i++){ const k='d'+(i+1); const day = state.days[k]; totalTasks += state.habits.length; if(day){ completedTasks += (day.completedCount || 0); if((day.completedCount||0) >= state.habits.length) fullyDone++; } }
      const percent = totalTasks ? Math.round((completedTasks/totalTasks)*100) : 0;
      progFill.style.width = percent+'%'; daysTrackedLabel.textContent = fullyDone; percentLabel.textContent = percent + '%'; startDateLabel.textContent = state.start ? fmt(parseYMD(state.start)) : '(not set)';
    }

    // export/import
    document.getElementById('export').addEventListener('click',()=>{ const blob = new Blob([JSON.stringify(state, null, 2)],{type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'habit60-export.json'; a.click(); URL.revokeObjectURL(url); })
    document.getElementById('importBtn').addEventListener('click',()=> document.getElementById('importFile').click())
    document.getElementById('importFile').addEventListener('change', e=>{ const f = e.target.files[0]; if(!f) return; const r = new FileReader(); r.onload = ()=>{ try{ const parsed = JSON.parse(r.result); // basic validation
          if(typeof parsed !== 'object' || !parsed) throw new Error('Invalid'); state = parsed; state.habits = state.habits || defaultHabits.slice(); state.days = state.days || {}; state.start = state.start || null; saveState(); renderAll(); alert('Import complete'); }catch(err){ alert('Invalid file'); } }; r.readAsText(f); })

    document.getElementById('clearAll').addEventListener('click',()=>{ if(!confirm('Clear all saved data?')) return; localStorage.removeItem(STORAGE_KEY); state = loadState(); selectedIndex = null; renderAll(); })

    // init
    function renderAll(){ renderHabits(); renderDayGrid(); if(state.start) startInput.value = state.start; updateProgress(); }
    renderAll();
  </script>
</body>
</html>
